<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>M√°gica do Anel</title>

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  background: black;
  overflow: hidden;
  touch-action: none;
}

/* √Årea principal */
#stage {
  width: 100vw;
  height: 100vh;
  position: relative;
}

/* Anel */
#anel {
  width: 250px;              /* üîß TAMANHO DO ANEL */
  height: 250px;
  position: absolute;
  display: none;
  background: center/contain no-repeat;
  filter: drop-shadow(0 0 20px gold);
  pointer-events: none;
}

/* Bot√£o tela cheia */
#fullscreenBtn {
  position: fixed;
  top: 15px;
  right: 15px;
  padding: 10px 14px;
  font-size: 14px;
  color: white;
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 8px;
  z-index: 10;
}
</style>
</head>

<body>

<div id="stage">
  <div id="anel"></div>
</div>

<button id="fullscreenBtn">Tela cheia</button>

<script>
/* ===============================
   CONFIGURA√á√ïES
   =============================== */

const IMG_INICIAL = 'ring2.png'; // üîß primeiro anel
const IMG_FINAL   = 'ring.png';  // üîß anel final

const TEMPO_TRANSFORMACAO = 2000; // üîß 2 segundos
const ATRITO = 0.98;             // üîß quanto escorrega (0.99 = mais gelo)

/* =============================== */

const anel = document.getElementById('anel');
const fsBtn = document.getElementById('fullscreenBtn');

let estado = 0; // 0=oculto | 1=ring2 | 2=ring final
let segurando = false;

let pos = { x: 0, y: 0 };
let vel = { x: 0, y: 0 };
let ultimo = { x: 0, y: 0 };

/* Centraliza o anel no toque */
function render() {
  const r = anel.offsetWidth / 2;
  anel.style.left = (pos.x - r) + 'px';
  anel.style.top  = (pos.y - r) + 'px';
}

/* Mostrar ring2 */
function mostrarInicial(x, y) {
  anel.style.display = 'block';
  anel.style.backgroundImage = `url('${IMG_INICIAL}')`;
  pos.x = x;
  pos.y = y;
  render();
  estado = 1;
}

/* Transformar em ring */
function transformar() {
  anel.style.transition = 'opacity 0.4s ease';
  anel.style.opacity = '0';

  setTimeout(() => {
    anel.style.backgroundImage = `url('${IMG_FINAL}')`;
    anel.style.opacity = '1';
    anel.style.transition = 'none';
    estado = 2;
  }, 400);
}

/* F√≠sica de deslize (h√≥quei) */
function animarFisica() {
  if (segurando || estado !== 2) return;

  pos.x += vel.x;
  pos.y += vel.y;

  vel.x *= ATRITO;
  vel.y *= ATRITO;

  render();

  /* Saiu completamente da tela */
  if (
    pos.x < -150 || pos.x > innerWidth + 150 ||
    pos.y < -150 || pos.y > innerHeight + 150
  ) {
    anel.style.display = 'none';
    estado = 0;
    return;
  }

  requestAnimationFrame(animarFisica);
}

/* ===============================
   CONTROLES DE TOQUE
   =============================== */

document.addEventListener('touchstart', e => {
  const t = e.touches[0];

  if (estado === 0) {
    mostrarInicial(t.clientX, t.clientY);

  } else if (estado === 1) {
    setTimeout(transformar, TEMPO_TRANSFORMACAO);
  }

  segurando = true;
  ultimo.x = t.clientX;
  ultimo.y = t.clientY;
});

document.addEventListener('touchmove', e => {
  if (!segurando || estado !== 2) return;

  const t = e.touches[0];

  vel.x = t.clientX - ultimo.x;
  vel.y = t.clientY - ultimo.y;

  pos.x = t.clientX;
  pos.y = t.clientY;

  ultimo.x = t.clientX;
  ultimo.y = t.clientY;

  render();
});

document.addEventListener('touchend', () => {
  segurando = false;
  if (estado === 2) requestAnimationFrame(animarFisica);
});

/* ===============================
   TELA CHEIA
   =============================== */

fsBtn.addEventListener('click', () => {
  const el = document.documentElement;
  if (el.requestFullscreen) el.requestFullscreen();
  else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
  fsBtn.style.display = 'none';
});
</script>

</body>
</html>
